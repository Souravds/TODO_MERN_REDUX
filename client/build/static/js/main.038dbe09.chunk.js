(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(8),u=n.n(o),i=n(3),s=(n(20),n(7)),l=n(6),d=n(2),j=n.n(d),p=n(5),f=n(4),b=function(){var e=Object(p.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"post",headers:{"Content-type":"application/json",Authorization:localStorage.getItem("token")},body:JSON.stringify(n)});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:n,headers:{"Content-type":"application/json",Authorization:localStorage.getItem("token")}});case 2:return r=e.sent,e.next=5,r.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=Object(f.b)("signupuser",function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/signup",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(f.b)("signinuser",function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/signin",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=Object(f.c)({name:"user",initialState:{token:"",loading:!1,error:""},reducers:{addToken:function(e,t){e.token=localStorage.getItem("token")},logout:function(e,t){e.token=null,localStorage.removeItem("token")}},extraReducers:(r={},Object(l.a)(r,h.pending,(function(e,t){e.loading=!0})),Object(l.a)(r,h.fulfilled,(function(e,t){e.loading=!1,t.payload.error?e.error=t.payload.error:(e.error=t.payload.message,e.token=t.payload.token)})),Object(l.a)(r,g.pending,(function(e,t){e.loading=!0})),Object(l.a)(r,g.fulfilled,(function(e,t){var n=t.payload,r=n.error,a=n.token;e.loading=!1,r?e.error=r:(e.token=a,localStorage.setItem("token",a))})),Object(l.a)(r,g.rejected,(function(e,t){e.loading=!1,e.error="Try Again Please..."})),r)}),m=v.actions,x=m.addToken,k=m.logout,y=v.reducer,w=n(1);var S,C=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),u=o[0],l=o[1],d=Object(a.useState)("signin"),j=Object(s.a)(d,2),p=j[0],f=j[1],b=Object(i.b)(),O=Object(i.c)((function(e){return e.user})),v=O.error,m=O.loading;return console.log(v),Object(w.jsxs)("div",{className:"container",children:[Object(w.jsxs)("h2",{children:["Please ",p]}),Object(w.jsx)("p",{children:v&&v}),Object(w.jsx)("input",{type:"email",placeholder:"Enter email...",value:n,onChange:function(e){return r(e.target.value)}}),Object(w.jsx)("input",{type:"password",placeholder:"Enter password...",value:u,onChange:function(e){return l(e.target.value)}}),"signin"===p?Object(w.jsx)("h6",{style:{cursor:"pointer"},onClick:function(){return f("signup")},children:"Don't have an accout?"}):Object(w.jsx)("h6",{style:{cursor:"pointer"},onClick:function(){return f("signin")},children:"Already have an accout?"}),Object(w.jsx)("button",{onClick:function(){return function(e){console.log(e),b("signin"===e?g({email:n,password:u}):h({email:n,password:u}))}(p)},className:"btn",children:p}),m&&Object(w.jsx)("div",{class:"progress",children:Object(w.jsx)("div",{class:"indeterminate"})})]})},N=Object(f.b)("addtodo",function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("/createtodo",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=Object(f.b)("fetchtodos",Object(p.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/gettodos","get");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))),E=Object(f.b)("deltetodo",function(){var e=Object(p.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/deletetodo/".concat(t),"delete");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=Object(f.c)({name:"todo",initialState:[],reducer:{},extraReducers:(S={},Object(l.a)(S,N.fulfilled,(function(e,t){var n=t.payload.message;n&&e.push(n)})),Object(l.a)(S,A.fulfilled,(function(e,t){return t.payload.message})),Object(l.a)(S,E.fulfilled,(function(e,t){var n=t.payload.message;return e.filter((function(e){return e._id!==n._id}))})),S)}).reducer;var _=function(){var e=Object(i.b)(),t=Object(a.useState)(" "),n=Object(s.a)(t,2),r=n[0],c=n[1],o=Object(i.c)((function(e){return e.todos}));return Object(a.useEffect)((function(){e(A())}),[e]),Object(w.jsxs)("div",{children:[Object(w.jsx)("input",{type:"text",placeholder:"Enter todo...",value:r,onChange:function(e){return c(e.target.value)}}),Object(w.jsx)("button",{className:"btn",onClick:function(){e(N({todo:r}))},children:"Add todo"}),Object(w.jsx)("ul",{className:"collection",children:o.map((function(t){return Object(w.jsx)("li",{style:{cursor:"pointer"},className:"collection-item",onClick:function(){return e(E(t._id))},children:t.todo},t._id)}))}),Object(w.jsx)("button",{className:"btn",onClick:function(){e(k())},children:"Logout"})]})};var J=function(){var e=Object(i.c)((function(e){return e.user})).token,t=Object(i.b)();return Object(a.useEffect)((function(){t(x())}),[t]),Object(w.jsx)("div",{className:"App",children:e?Object(w.jsx)(_,{}):Object(w.jsx)(C,{})})},T=Object(f.a)({reducer:{user:y,todos:I}});n(23),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(i.a,{store:T,children:Object(w.jsx)(J,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.038dbe09.chunk.js.map